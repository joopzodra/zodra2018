function httpGetAsync(e){return new Promise((t,o)=>{var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&200==r.status&&t(JSON.parse(r.responseText))};r.open("GET",e,!0);r.send(null)})}function wktPointToGeoJson(e){if(!e.includes("POINT"))throw TypeError("Provided WKT geometry is not a point.");const t=e.split("(")[1].split(")")[0];return{type:"Point",coordinates:[parseFloat(t.split(" ")[0]),parseFloat(t.split(" ")[1])]}}function wmsBaseUrl(e){return"https://geodata.nationaalgeoregister.nl/"+e+"/wms?"}function mapWmsProvider(e,t){const o={workSpaceName:"",layerName:"",styleName:"",url:"",minZoom:0,maxZoom:24};switch(e){case"gebouwen":o.workSpaceName="bag",o.layerName="pand",o.styleName="";break;case"percelen":o.workSpaceName="kadastralekaartv3",o.layerName="kadastralekaart",o.styleName="";break;case"drone-no-fly-zones":o.workSpaceName="dronenoflyzones",o.layerName="luchtvaartgebieden,landingsite",o.styleName="";break;case"hoogte":o.workSpaceName="ahn2",o.layerName="ahn2_05m_int",o.styleName="ahn2:ahn2_05m_detail";break;case"gemeenten":o.workSpaceName="bestuurlijkegrenzen",o.layerName="gemeenten",o.styleName="bestuurlijkegrenzen:bestuurlijkegrenzen_gemeentegrenzen";break;case"provincies":o.workSpaceName="bestuurlijkegrenzen",o.layerName="provincies",o.styleName="bestuurlijkegrenzen:bestuurlijkegrenzen_provinciegrenzen";break;default:o.url=t.url,o.layerName=t.layerName,o.styleName=t.styleName}return""===o.url&&(o.url=wmsBaseUrl(o.workSpaceName)),o}function makeWmsProvider(e,t){const o=mapWmsProvider(e,t);return{url:o.url,service:"WMS",version:"1.1.1",request:"GetMap",layers:o.layerName,styles:o.styleName,transparent:!0,format:"image/png"}}function baseUrl(e){return`https://geodata.nationaalgeoregister.nl/${"luchtfoto"===e?lufostring:brtstring}/wmts/`}function mapLayerName(e){let t;switch(e){case"standaard":t="brtachtergrondkaart";break;case"grijs":t="brtachtergrondkaartgrijs";break;case"pastel":t="brtachtergrondkaartpastel";break;case"luchtfoto":t="2016_ortho25";break;default:t="brtachtergrondkaart"}return t}function makeProvider(e,t,o,r){const n=baseUrl(e),a=mapLayerName(e);return{bare_url:[n,a,servicecrs].join(""),url:[n,a,servicecrs,"/{z}/{x}/{y}.",t].join(""),format:t,minZoom:o,maxZoom:r,attribution:attr,name:`${"luchtfoto"===e?"":"NLMaps "} ${e}`}}function getProvider(e){if(e in BASEMAP_PROVIDERS){var t=BASEMAP_PROVIDERS[e];return t.deprecated&&console&&console.warn&&console.warn(e+" is a deprecated style; it will be redirected to its replacement. For performance improvements, please change your reference."),t}console.error("NL Maps error: You asked for a style which does not exist! Available styles: "+Object.keys(PROVIDERS).join(", "))}function getWmsProvider(e,t){let o;return e in WMS_PROVIDERS?(o=WMS_PROVIDERS[e]).deprecated&&console&&console.warn&&console.warn(e+" is a deprecated wms; it will be redirected to its replacement. For performance improvements, please change your reference."):(o=makeWmsProvider(e,t),console.log("NL Maps: You asked for a wms which does not exist! Available wmses: "+Object.keys(WMS_PROVIDERS).join(", ")+". Provide an options object to make your own WMS.")),o}function bgLayer(){var e=getProvider(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"standaard");if("object"===("undefined"==typeof ol?"undefined":_typeof(ol)))return new ol.layer.Tile({source:new ol.source.XYZ({url:e.url,attributions:[new ol.Attribution({html:e.attribution})]})});throw"openlayers is not defined"}function markerLayer(e){var t=new ol.style.Style({image:new ol.style.Icon({anchor:[32,63],anchorXUnits:"pixels",anchorYUnits:"pixels",src:markerUrl,scale:1})}),o=void 0,r=void 0;if(void 0===e){var n=getMapCenter(map);o=n.latitude,r=n.longitude}else o=e.latitude,r=e.longitude;var a=ol.proj.fromLonLat([r,o]),s=new ol.Feature({geometry:new ol.geom.Point(a),name:"marker"});s.setStyle(t);var l=new ol.source.Vector({features:[s]});return new ol.layer.Vector({source:l})}function overlayLayer(e,t){var o=getWmsProvider(e,t);if("object"===("undefined"==typeof ol?"undefined":_typeof(ol)))return new ol.layer.Tile({source:new ol.source.TileWMS({url:o.url,serverType:"geoserver",params:{LAYERS:o.layers,VERSION:o.version,STYLES:o.styles}})});throw"openlayers is not defined"}function geoLocatorControl(e,t){function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,o=t.getView().getZoom(),r=new ol.View({center:ol.proj.fromLonLat([e.coords.longitude,e.coords.latitude]),zoom:o});t.setView(r)}var r=document.createElement("div");return r.id="nlmaps-geolocator-control",r.style.backgroundColor="#fff",r.style.cursor="pointer",r.style.boxShadow="0 1px 5px rgba(0, 0, 0, 0.65)",r.style.height="26px",r.style.width="26px",r.style.borderRadius="26px 26px",r.innerHTML=geolocator_icon,r.className="ol-control",r.style.right=".5em",r.style.top=".5em",r.addEventListener("click",function(){e.start()}),e.on("position",function(e){o(e,t)}),new ol.control.Control({element:r})}function zoomTo(e,t){var o=ol.proj.fromLonLat(e.coordinates);t.getView().setCenter(o),t.getView().setZoom(18)}function getMapCenter(e){var t=e.getView().getCenter(),o=ol.proj.toLonLat(t);return{longitude:o[0],latitude:o[1]}}function geocoderControl(e){var t=geocoder.createControl(zoomTo,e);t=new ol.control.Control({element:t}),e.addControl(t)}const geocoder={suggestUrl:"https://geodata.nationaalgeoregister.nl/locatieserver/v3/suggest?",lookupUrl:"https://geodata.nationaalgeoregister.nl/locatieserver/v3/lookup?"};geocoder.doSuggestRequest=function(e){return httpGetAsync(`${this.suggestUrl}q=${encodeURIComponent(e)}`)},geocoder.doLookupRequest=function(e){return httpGetAsync(`${this.lookupUrl}id=${encodeURIComponent(e)}`).then(e=>{const t=e.response.docs[0];t.centroide_ll=wktPointToGeoJson(t.centroide_ll);t.centroide_rd=wktPointToGeoJson(t.centroide_rd);return t})},geocoder.createControl=function(e,t){this.zoomTo=e,this.map=t;const o=document.createElement("div"),r=document.createElement("div"),n=document.createElement("input"),a=document.createElement("div");return o.style.width="300px",o.style.zIndex=1e6,o.style.position="absolute",o.style.top="15px",o.style.left="12px",n.id="nlmaps-geocoder-control-input",n.placeholder="Zoeken op adres...",n.style.padding="4px 10px",n.style.width="100%",n.style.border="none",n.style.backgroundColor="#fff",n.style.boxShadow="0 1px 5px rgba(0, 0, 0, 0.65)",n.style.height="26px",n.style.borderRadius="5px 5px",n.addEventListener("input",e=>{this.suggest(e.target.value)}),n.addEventListener("focus",e=>{this.suggest(e.target.value)}),a.id="nlmaps-geocoder-control-results",a.style.width="300px",o.appendChild(r),r.appendChild(n),o.appendChild(a),o},geocoder.suggest=function(e){if(e.length<4)return void this.clearSuggestResults();this.doSuggestRequest(e).then(e=>{this.showSuggestResults(e.response.docs)})},geocoder.lookup=function(e){this.doLookupRequest(e).then(e=>{this.zoomTo(e.centroide_ll,this.map);this.showLookupResult(e.weergavenaam);this.clearSuggestResults()})},geocoder.clearSuggestResults=function(){document.getElementById("nlmaps-geocoder-control-results").innerHTML=""},geocoder.showLookupResult=function(e){document.getElementById("nlmaps-geocoder-control-input").value=e},geocoder.showSuggestResults=function(e){const t=document.createElement("ul");t.style.padding="10px 10px 2px 10px",t.style.width="100%",t.style.background="#FFFFFF",t.style.borderRadius="5px 5px",t.style.boxShadow="0 1px 5px rgba(0, 0, 0, 0.65)",e.forEach(e=>{const o=document.createElement("li");o.innerHTML=e.weergavenaam;o.id=e.id;o.style.cursor="pointer";o.style.padding="5px";o.style.listStyleType="none";o.style.marginBottom="5px";o.addEventListener("click",e=>{this.lookup(e.target.id)});o.addEventListener("mouseenter",()=>{o.style.background="#6C62A6";o.style.color="#FFFFFF"});o.addEventListener("mouseleave",()=>{o.style.background="#FFFFFF";o.style.color="#333"});t.appendChild(o)}),this.clearSuggestResults(),document.getElementById("nlmaps-geocoder-control-results").appendChild(t)};const WMS_PROVIDERS={gebouwen:makeWmsProvider("gebouwen"),percelen:makeWmsProvider("percelen"),"drone-no-fly-zones":makeWmsProvider("drone-no-fly-zones"),hoogte:makeWmsProvider("hoogte"),gemeenten:makeWmsProvider("gemeenten"),provincies:makeWmsProvider("provincies")},lufostring="luchtfoto/rgb",brtstring="tiles/service",servicecrs="/EPSG:3857",attr='Kaartgegevens &copy; <a href="https://www.kadaster.nl">Kadaster</a> | <a href="https://www.verbeterdekaart.nl">Verbeter de kaart</a>',BASEMAP_PROVIDERS={standaard:makeProvider("standaard","png",6,19),pastel:makeProvider("pastel","png",6,19),grijs:makeProvider("grijs","png",6,19),luchtfoto:makeProvider("luchtfoto","jpeg",6,19)},geolocator_icon=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="7.0556mm" width="7.0556mm" version="1.1"\nxmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 24.999999 24.999999">\n<metadata>  <rdf:RDF>   <cc:Work rdf:about="">    <dc:format>image/svg+xml</dc:format>    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>\n<dc:title/>   </cc:Work>  </rdf:RDF> </metadata> <g transform="translate(-151.39 -117.97)">  <g transform="translate(.39250 .85750)">\n<path style="color-rendering:auto;text-decoration-color:#000000;color:#000000;shape-rendering:auto;solid-color:#000000;text-decoration-line:none;fill:#191919;mix-blend-mode:normal;block-progression:tb;text-indent:0;image-rendering:auto;white-space:normal;text-decoration-style:solid;isolation:auto;text-transform:none" d="m163.5 123.27c-3.4931 0-6.3379 2.8448-6.3379 6.3379s2.8448 6.3398 6.3379 6.3398 6.3379-2.8467 6.3379-6.3398-2.8448-6.3379-6.3379-6.3379zm0 1.3008c2.7905 0 5.0391 2.2466 5.0391 5.0371s-2.2485 5.0391-5.0391 5.0391c-2.7905 0-5.0391-2.2485-5.0391-5.0391 0-2.7905 2.2485-5.0371 5.0391-5.0371z"/><circle cx="163.5" cy="129.61" r="1.9312" style="fill:#191919"/>\n<path style="color-rendering:auto;text-decoration-color:#000000;color:#000000;shape-rendering:auto;solid-color:#000000;text-decoration-line:none;fill:#191919;fill-rule:evenodd;mix-blend-mode:normal;block-progression:tb;text-indent:0;image-rendering:auto;white-space:normal;text-decoration-style:solid;isolation:auto;text-transform:none" d="m162.85 120.57v3.3555h1.3008v-3.3555h-1.3008z"/>   <path style="color-rendering:auto;text-decoration-color:#000000;color:#000000;shape-rendering:auto;solid-color:#000000;text-decoration-line:none;fill:#191919;fill-rule:evenodd;mix-blend-mode:normal;block-progression:tb;text-indent:0;image-rendering:auto;white-space:normal;text-decoration-style:solid;isolation:auto;text-transform:none" d="m162.85 135.3v3.3555h1.3008v-3.3555h-1.3008z"/>   <path style="color-rendering:auto;text-decoration-color:#000000;color:#000000;shape-rendering:auto;solid-color:#000000;text-decoration-line:none;fill:#191919;fill-rule:evenodd;mix-blend-mode:normal;block-progression:tb;text-indent:0;image-rendering:auto;white-space:normal;text-decoration-style:solid;isolation:auto;text-transform:none" d="m154.46 128.96v1.2988h3.3535v-1.2988h-3.3535z"/>\n<path style="color-rendering:auto;text-decoration-color:#000000;color:#000000;shape-rendering:auto;solid-color:#000000;text-decoration-line:none;fill:#191919;fill-rule:evenodd;mix-blend-mode:normal;block-progression:tb;text-indent:0;image-rendering:auto;white-space:normal;text-decoration-style:solid;isolation:auto;text-transform:none" d="m169.19 128.96v1.2988h3.3535v-1.2988h-3.3535z"/>  </g> </g></svg>`,markerUrl="https://rawgit.com/webmapper/nlmaps/master/dist/assets/rijksoverheid-marker.png";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};export{bgLayer,overlayLayer,markerLayer,getMapCenter,geoLocatorControl,geocoderControl};
